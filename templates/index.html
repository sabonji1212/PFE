<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Prediction Form</title>

  <style>
    body {
      font-family: "Poppins", sans-serif;
      background: linear-gradient(135deg, #4f46e5, #06b6d4);
      height: 100vh;
      margin: 0;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .container {
      background: #ffffff;
      padding: 30px 40px;
      border-radius: 20px;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
      width: 350px;
    }   
       h2 {
      text-align: center;
      color: #333;
      margin-bottom: 25px;
    }   
      .input-group {
      display: flex;
      flex-direction: column;
      gap: 12px;
      margin-bottom: 20px;
    }
        label {
      font-size: 14px;
      color: #444;
    }
    input[type="text"] {
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 8px;
      outline: none;
      transition: border-color 0.2s;
    }
    input[type="text"]:focus {
      border-color: #4f46e5;
    }
     button {
      width: 100%;
      padding: 10px;
      border: none;
      border-radius: 8px;
      background-color: #4f46e5;
      color: white;
      font-weight: bold;
      cursor: pointer;
      transition: background-color 0.3s;
    }

    button:hover {
      background-color: #4338ca;
    }
     #result {
      text-align: center;
      margin-top: 15px;
      font-weight: 600;
      color: #111;
    }
  </style>
</head>
<form  id="prediction-form">

    <body>
    <div class="container">
        <h2>Prediction Form</h2>

        <div class="input-group">
        <label for="Hours_Studied">Hours Studied (H)</label>
        <input type="text" id="Hours_Studied" placeholder="eg. 1 ~ 45" required>

        <label for="Attendance">Attendance (%)</label>
        <input type="text" id="Attendance" placeholder="eg. 0 ~ 100" required>

        <label for="Parental_Involvement">Parental Involvement (Low, Medium, High).</label>
        <input type="text" id="Parental_Involvement" placeholder="eg. 1 ~ 2 ~ 3" required>
        </div>

        <div class="input-group">
        <label for="Teacher_Quality">Teacher Quality (Low, Medium, High)</label>
        <input type="text" id="Teacher_Quality" placeholder="eg. 1 ~ 2 ~ 3" required>

        <label for="Family_Income">Family_Income (Low, Medium, High)</label>
        <input type="text" id="Family_Income" placeholder="eg. 1 ~ 2 ~ 3" required>

        <label for="Previous_Scores">Previous Scores (p)</label>
        <input type="text" id="Previous_Scores" placeholder="eg. 0 ~ 100" required>
        </div>

        <button type="submit" id="submit-button">Predict</button>
        <p id="result"></p>
    </div>

    <script>
       document.addEventListener('DOMContentLoaded', () => {
        const form = document.getElementById('prediction-form');
        const resultElement = document.getElementById('result');
        const submitButton = document.getElementById('submit-button');

        form.addEventListener('submit', async (event) => {
            event.preventDefault();

            resultElement.textContent = '';
            resultElement.classList.remove('result-error', 'result-success');
            submitButton.disabled = true;
            submitButton.textContent = 'Predicting...';

            try{
              const inputs = [
            document.getElementById('Hours_Studied').value,
            document.getElementById('Attendance').value,
            document.getElementById('Parental_Involvement').value,
            document.getElementById('Teacher_Quality').value,
            document.getElementById('Family_Income').value,
            document.getElementById('Previous_Scores').value,
          ];
            const features = inputs.map(val => parseFloat(val));
            features[5] = features[5] * 5;
            if (features.some(isNaN)) {
            throw new Error('Please enter valid numbers in all fields.');
          } 

            const response = await fetch('/predict', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify({ features: features }), 
          });

          const data = await response.json();
           if (!response.ok) {
            throw new Error(data.error || 'An unknown error occurred.');
          }


           const predictionValue = parseFloat(data.prediction).toFixed(4); 
           resultElement.textContent = `Prediction: ${predictionValue}`;
            resultElement.classList.add('result-success');



          }catch(error){
            resultElement.textContent = `Error: ${error.message}`;
            resultElement.classList.add('result-error');
            console.error('Prediction error:', error);
          }finally{
             submitButton.disabled = false;
             submitButton.textContent = 'Predict';
          }


        });



      });
    </script>


</form>
</body>
</html>
